---
weight: 12
bookToc: false
title: "テンプレート画像の作成"
---

# テンプレート画像の作成

画像認識でテンプレートとして使用する画像を作成します。

```Tool```→```プレビュー/テンプレート画像を作成```を選択するとテンプレート画像を作成する画面に移行します。

{{< figure src="/image/ash/preview001.png" class="center" >}}

{{<hint danger>}}
- 表の1行目はリセット用に確保されています。通常の監視は2行目から使用されます。
- リセット監視を使用しない場合であっても、リセット用のテンプレートを作成してください。
- また、ループ処理を実行する場合でも、Split用のテンプレートを2つ作成してください（表の3行目まで）。
{{</hint>}}


## テンプレート画像の作成方法

基本的な流れは、①「監視方式を指定」、②「何番目に使用するテンプレートかを指定」、③「[Capture]ボタンを押してテンプレート画像を取得」となります。

1. 画面内の[Method]欄から監視方式を指定することができます。監視方式はいくつか種類がありますが、ここでは[8: L2Norm]を指定します。

2. 画像を取得する前に、表を行選択状態にして下さい（保存したい行のどこかのセルを選択、でも構いません）。選択された行へパラメーターが保存されます。

3. テンプレートにしたい場面が表示されたら[**Capture**]ボタンを押してください。押下時点での映像が残るので、クリック＆ドラッグでテンプレートにしたい部分を選択して下さい。

{{<hint info>}}
[**全画面**]にチェックを入れて[**Capture**]ボタンを押すと画面全体を取得します。
{{</hint>}}
\
\
これでテンプレートの取得が終了しました。

※選択している方式によっては追加の処理が必要になります。画面の指示に従ってください。


{{<hint info>}}
- テンプレートとして適している場面は、画像が平坦ではない、ユニークな場面（スコアリザルト、クリア時に表示される特殊なアイコンなど）です。
- テンプレートによってはマスク処理が必要になる場合があります（例：スーパーマリオサンシャインの「SHINE GET!」表示）。詳細は[マスク画像の利用]({{< ref "/docs/10tips/009maskimage.md" >}})を参照してください。
{{</hint>}}

{{<hint info>}}
Methodでテンプレートマッチングを指定し、[**限定探索**]にチェックを入れた場合、テンプレート取得後にもう1度範囲選択を求められます。ここで指定した範囲は、マッチングした画像がその範囲内に入っているかどうかのチェックに使われます。
{{</hint>}}

{{<hint info>}}
テンプレート画像の作成はゲームをプレイしながら行っても良いですが、まず録画映像をキャプチャしてテンプレート画像を作成し、その後ゲーム画面をキャプチャするように設定し直す、という方法でも構いません。この場合、**表示解像度はCropped以外を選択**してください。
{{</hint>}}


### Method
どの方式で類似度確認を行うかを指定します。表の[方式]列に対応します。各方式の説明については[各監視方式の特徴]({{< ref "/docs/10tips/007monitoringmethod.md" >}})を参照してください。

基本的にはテンプレートマッチング/L2 Normのどちらかを使用すれば大抵の場面で利用できると思います。
{{<hint info>}}
- テンプレートとした画像の表示される位置が常に固定の場合→L2Norm
- 画像の表示される位置がランダムだったり、プレイヤーの操作によって変わってしまう場合→テンプレートマッチング
{{</hint>}}


### リプレイ
テンプレートとしたい場面が一瞬しか表示されなかったり、ゲームの操作中にしか現れないためキャプチャが困難な場合があります。\
[**Replay**]を押すと直近の映像を再度表示することができ、そういった場面でもキャプチャが可能となります。\
リプレイ映像の保持時間は、設定の[Other]タブで指定できます。

{{< figure src="/image/ash/preview002.png" class="center" >}}

### Load Remover用のテンプレート取得
[**Load Remover用**]にチェックを入れると表が切り替わり、Load Remover用のテンプレート画像を作成するようになります（ファイル名：loading[n].png）。テンプレート画像の作成方法に変化はありません。

### Target
キャプチャ対象の指定（Video/Audio）。

### 類似度確認
[**Similarity**]にチェックを入れると、現在選択している行に対応する画像がキャプチャ映像とどの程度類似しているかを確認することができます。テンプレートが問題なく使用できるかどうかの確認などで使用します。

{{< figure src="/image/ash/preview003.png" class="center" >}}

選択中の行に対して類似度算出を行います。表示は[現在の類似度] [最大類似度]となっています。

{{<hint warning>}}
※設定でフィルターを適用している場合はその設定が反映されますが、テンプレートのキャプチャは行なえません。
{{</hint>}}