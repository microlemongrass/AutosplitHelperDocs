---
title: Monitoring
weight: 1
bookToc: false
---

# Monitoring
{{<hint info>}}
ゲーム画面の取り込み方等、基幹部分の設定項目があります。
{{</hint>}}

{{< figure src="/image/ash/setmonitoring001.png" class="center" >}}


### 画面キャプチャ方式
ゲームなどの画面の取り込み方を指定します。
- Virtual：OBS Studio、SCFF DSF等の仮想カメラ
- Screen：デスクトップ画面を直接キャプチャ
  
{{<hint warning>}}
スクリーンキャプチャではキャプチャサイズが大きい（1280x720以上）場合はキャプチャ速度、類似度算出処理の速度が大きく低下する可能性があるため、Virtual Capture（その中でもOBS-VirtualCam）を使用することをおすすめします。
{{</hint>}}

　
### 監視fps
監視間隔をフレームレートで指定します。

※Windows10 2004でこの項目に関するWindowsの仕様変更がありました。Windowsを最新の状態にしている場合の挙動について説明しています。

#### Screen Capture(Type:Window)の場合
60超過\
→高精度チェックの有無に関わらず約63fpsになりますが、フレーム落ちが必ず発生するため実質の精度は低下します。

60以下\
→高精度チェック有のとき、fpsは設定値となります。
 高精度チェック無のとき、監視間隔は(1000/16n)fpsになります。約63/31/21/17/...fps


#### Screen Capture(Type:WGC)の場合
モニターのリフレッシュレートとなります。設定値は影響しません。フレーム落ちの程度はPCに依ると思われます。


#### Screen Capture(Type:Desktop)の場合
fpsは設定値を大きく下回ります。特別な理由がない場合はType:WindowもしくはWGCを使用してください。


#### Virtual Captureの場合
設定値はVirutal Captureの設定で入力したフレームレートに合わせてください。fpsは設定値となり、フレーム落ちの程度はPCスペックに依存すると思われます。\
高精度の有無は精度に影響せず、負荷が大きくなるだけなのでチェックを外してください。

　
### 並列処理（Parallel processing）
類似度の算出処理を並列化すると、数枚のテンプレートを同時に監視する場合の処理速度低下をある程度抑えることができます。

Maxは最大同時並列処理数です。設定値は3~4で十分です（が効いてなさそうです。 MaxDegreeOfParallelismを設定しています。）

{{<hint danger>}}
並行処理を使用すると動作が不安定になるかもしれません。その場合は並列処理を無効にしてください。
{{</hint>}}

　
### 自動化の対象(Split/Loop/Reset/Load remover)
　監視対象を指定。\
　ループにチェックを入れた場合、1番最初の画像（表では上から2番目）を指定回数監視します。

{{<hint warning>}}
ループを使用する場合でも、Split用の画像を2枚以上作成する必要があります。
{{</hint>}}

　
### デフォルトパラメーター（一部）
　各項目自体の説明は「表の説明」を参照してください。テンプレート画像を新規に作成したときのデフォルト値、また各項目を表に一括適用する場合に使用します。

　
### シーンチェンジ
　ラップを取るタイミングを2（シーンチェンジ後）とした場合に使用されます。対象範囲（表のPX/PY/SX/SY(S)で指定した範囲）に指定した色が指定の閾値以上となった場合、判定が発生します。

色 - 許容範囲は、シーンチェンジで指定した色のズレの許容範囲を示します。例えば(R, G, B) = (100, 100, 100)、許容値=10の場合、90<=R<=110、90<=G<=110、90<=B<=110であればその色であるとみなされます。

